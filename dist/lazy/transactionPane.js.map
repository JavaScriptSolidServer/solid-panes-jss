{"version":3,"file":"transactionPane.js","names":["UI","ns","transactionPane","icon","icons","iconBase","name","audience","solid","label","subject","context","dominated","uri","endsWith","dominated2","kb","session","store","dominated3","any","qu","types","findTypeURIs","render","mod","realPane","default","financialPeriodPane","anyValue","httph","includes","each","ldp","res","types2","tripPane","findSuperClassesNT"],"sources":["../../src/lazy/transactionPane.js"],"sourcesContent":["/**\n * Lazy-loaded transaction panes (transaction, financial period, trip)\n */\nimport * as UI from 'solid-ui-jss'\n\nconst ns = UI.ns\n\nexport const transactionPane = {\n  icon: UI.icons.iconBase + 'noun_106746.svg',\n  name: 'transaction',\n  audience: [ns.solid('PowerUser')],\n\n  label: function (subject, context) {\n    const dominated = subject.uri.endsWith('/profile/card')\n    const dominated2 = subject.uri.endsWith('/profile/card#me')\n    if (dominated || dominated2) return null\n\n    const kb = context.session.store\n    const dominated3 = kb.any(subject, ns.qu('amount'))\n    if (dominated3) return '$$$'\n\n    const types = kb.findTypeURIs(subject)\n    if (types[ns.qu('Transaction').uri]) return '$$'\n    if (types['http://www.w3.org/ns/pim/trip#Trip']) return 'Trip $'\n\n    return null\n  },\n\n  render: async function (subject, context) {\n    const mod = await import(/* webpackChunkName: \"transaction-pane\" */ '../transaction/pane.js')\n    const realPane = mod.default || mod\n    return realPane.render(subject, context)\n  }\n}\n\nexport const financialPeriodPane = {\n  icon: UI.icons.iconBase + 'noun_106746.svg',\n  name: 'period',\n  audience: [ns.solid('PowerUser')],\n\n  label: function (subject, context) {\n    const kb = context.session.store\n    const types = kb.findTypeURIs(subject)\n\n    if (types['http://www.w3.org/ns/pim/trip#Trip']) return 'Trip expenses'\n\n    // Check if it's a container with transactions\n    const dominated = kb.anyValue(subject, ns.httph('content-type'))\n    if (dominated && dominated.includes('container')) {\n      const dominated2 = kb.each(subject, ns.ldp('contains'))\n      for (const res of dominated2) {\n        const types2 = kb.findTypeURIs(res)\n        if (types2[ns.qu('Transaction').uri]) return 'Financial period'\n      }\n    }\n\n    return null\n  },\n\n  render: async function (subject, context) {\n    const mod = await import(/* webpackChunkName: \"transaction-pane\" */ '../transaction/period.js')\n    const realPane = mod.default || mod\n    return realPane.render(subject, context)\n  }\n}\n\nexport const tripPane = {\n  icon: UI.icons.iconBase + 'noun_62007.svg',\n  name: 'travel expenses',\n  audience: [ns.solid('PowerUser')],\n\n  label: function (subject, context) {\n    const kb = context.session.store\n    const dominated = kb.findSuperClassesNT(subject)\n    if (dominated[ns.qu('Transaction').uri]) return 'by Trip'\n\n    const types = kb.findTypeURIs(subject)\n    if (types['http://www.w3.org/ns/pim/trip#Trip']) return 'Trip $'\n\n    return null\n  },\n\n  render: async function (subject, context) {\n    const mod = await import(/* webpackChunkName: \"transaction-pane\" */ '../trip/tripPane.js')\n    const realPane = mod.default || mod\n    return realPane.render(subject, context)\n  }\n}\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,KAAKA,EAAE,MAAM,cAAc;AAElC,MAAMC,EAAE,GAAGD,EAAE,CAACC,EAAE;AAEhB,OAAO,MAAMC,eAAe,GAAG;EAC7BC,IAAI,EAAEH,EAAE,CAACI,KAAK,CAACC,QAAQ,GAAG,iBAAiB;EAC3CC,IAAI,EAAE,aAAa;EACnBC,QAAQ,EAAE,CAACN,EAAE,CAACO,KAAK,CAAC,WAAW,CAAC,CAAC;EAEjCC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMC,SAAS,GAAGF,OAAO,CAACG,GAAG,CAACC,QAAQ,CAAC,eAAe,CAAC;IACvD,MAAMC,UAAU,GAAGL,OAAO,CAACG,GAAG,CAACC,QAAQ,CAAC,kBAAkB,CAAC;IAC3D,IAAIF,SAAS,IAAIG,UAAU,EAAE,OAAO,IAAI;IAExC,MAAMC,EAAE,GAAGL,OAAO,CAACM,OAAO,CAACC,KAAK;IAChC,MAAMC,UAAU,GAAGH,EAAE,CAACI,GAAG,CAACV,OAAO,EAAET,EAAE,CAACoB,EAAE,CAAC,QAAQ,CAAC,CAAC;IACnD,IAAIF,UAAU,EAAE,OAAO,KAAK;IAE5B,MAAMG,KAAK,GAAGN,EAAE,CAACO,YAAY,CAACb,OAAO,CAAC;IACtC,IAAIY,KAAK,CAACrB,EAAE,CAACoB,EAAE,CAAC,aAAa,CAAC,CAACR,GAAG,CAAC,EAAE,OAAO,IAAI;IAChD,IAAIS,KAAK,CAAC,oCAAoC,CAAC,EAAE,OAAO,QAAQ;IAEhE,OAAO,IAAI;EACb,CAAC;EAEDE,MAAM,EAAE,eAAAA,CAAgBd,OAAO,EAAEC,OAAO,EAAE;IACxC,MAAMc,GAAG,GAAG,MAAM,MAAM,CAAC,0CAA2C,wBAAwB,CAAC;IAC7F,MAAMC,QAAQ,GAAGD,GAAG,CAACE,OAAO,IAAIF,GAAG;IACnC,OAAOC,QAAQ,CAACF,MAAM,CAACd,OAAO,EAAEC,OAAO,CAAC;EAC1C;AACF,CAAC;AAED,OAAO,MAAMiB,mBAAmB,GAAG;EACjCzB,IAAI,EAAEH,EAAE,CAACI,KAAK,CAACC,QAAQ,GAAG,iBAAiB;EAC3CC,IAAI,EAAE,QAAQ;EACdC,QAAQ,EAAE,CAACN,EAAE,CAACO,KAAK,CAAC,WAAW,CAAC,CAAC;EAEjCC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMK,EAAE,GAAGL,OAAO,CAACM,OAAO,CAACC,KAAK;IAChC,MAAMI,KAAK,GAAGN,EAAE,CAACO,YAAY,CAACb,OAAO,CAAC;IAEtC,IAAIY,KAAK,CAAC,oCAAoC,CAAC,EAAE,OAAO,eAAe;;IAEvE;IACA,MAAMV,SAAS,GAAGI,EAAE,CAACa,QAAQ,CAACnB,OAAO,EAAET,EAAE,CAAC6B,KAAK,CAAC,cAAc,CAAC,CAAC;IAChE,IAAIlB,SAAS,IAAIA,SAAS,CAACmB,QAAQ,CAAC,WAAW,CAAC,EAAE;MAChD,MAAMhB,UAAU,GAAGC,EAAE,CAACgB,IAAI,CAACtB,OAAO,EAAET,EAAE,CAACgC,GAAG,CAAC,UAAU,CAAC,CAAC;MACvD,KAAK,MAAMC,GAAG,IAAInB,UAAU,EAAE;QAC5B,MAAMoB,MAAM,GAAGnB,EAAE,CAACO,YAAY,CAACW,GAAG,CAAC;QACnC,IAAIC,MAAM,CAAClC,EAAE,CAACoB,EAAE,CAAC,aAAa,CAAC,CAACR,GAAG,CAAC,EAAE,OAAO,kBAAkB;MACjE;IACF;IAEA,OAAO,IAAI;EACb,CAAC;EAEDW,MAAM,EAAE,eAAAA,CAAgBd,OAAO,EAAEC,OAAO,EAAE;IACxC,MAAMc,GAAG,GAAG,MAAM,MAAM,CAAC,0CAA2C,0BAA0B,CAAC;IAC/F,MAAMC,QAAQ,GAAGD,GAAG,CAACE,OAAO,IAAIF,GAAG;IACnC,OAAOC,QAAQ,CAACF,MAAM,CAACd,OAAO,EAAEC,OAAO,CAAC;EAC1C;AACF,CAAC;AAED,OAAO,MAAMyB,QAAQ,GAAG;EACtBjC,IAAI,EAAEH,EAAE,CAACI,KAAK,CAACC,QAAQ,GAAG,gBAAgB;EAC1CC,IAAI,EAAE,iBAAiB;EACvBC,QAAQ,EAAE,CAACN,EAAE,CAACO,KAAK,CAAC,WAAW,CAAC,CAAC;EAEjCC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMK,EAAE,GAAGL,OAAO,CAACM,OAAO,CAACC,KAAK;IAChC,MAAMN,SAAS,GAAGI,EAAE,CAACqB,kBAAkB,CAAC3B,OAAO,CAAC;IAChD,IAAIE,SAAS,CAACX,EAAE,CAACoB,EAAE,CAAC,aAAa,CAAC,CAACR,GAAG,CAAC,EAAE,OAAO,SAAS;IAEzD,MAAMS,KAAK,GAAGN,EAAE,CAACO,YAAY,CAACb,OAAO,CAAC;IACtC,IAAIY,KAAK,CAAC,oCAAoC,CAAC,EAAE,OAAO,QAAQ;IAEhE,OAAO,IAAI;EACb,CAAC;EAEDE,MAAM,EAAE,eAAAA,CAAgBd,OAAO,EAAEC,OAAO,EAAE;IACxC,MAAMc,GAAG,GAAG,MAAM,MAAM,CAAC,0CAA2C,qBAAqB,CAAC;IAC1F,MAAMC,QAAQ,GAAGD,GAAG,CAACE,OAAO,IAAIF,GAAG;IACnC,OAAOC,QAAQ,CAACF,MAAM,CAACd,OAAO,EAAEC,OAAO,CAAC;EAC1C;AACF,CAAC","ignoreList":[]}