{"version":3,"file":"bookmarkPane.js","names":["UI","$rdf","ns","schema","Namespace","bookmarkPane","name","icon","icons","iconBase","label","subject","context","kb","session","store","rdfType","rdf","bookmarkType","holds","ldp","contents","each","hasBookmarks","some","item","render","options","mod","e","console","error","div","document","createElement","textContent","message","mintNew","mintClass"],"sources":["../../src/lazy/bookmarkPane.js"],"sourcesContent":["/**\n * Bookmark Pane - Lazy Wrapper\n *\n * This lightweight wrapper is always loaded. It contains only:\n * - Icon and name\n * - label() function for type checking\n * - Async render() that loads the full implementation on demand\n *\n * The actual rendering code is in render.js and only loads\n * when someone views a bookmark.\n */\n\n// Import only what's needed for label() checks\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\n\nconst ns = UI.ns\n\n// Define schema namespace for bookmarks\nconst schema = $rdf.Namespace('http://schema.org/')\n\nexport const bookmarkPane = {\n  // Unique identifier for this pane\n  name: 'bookmark',\n\n  // Icon shown in pane selector\n  icon: UI.icons.iconBase + 'noun_97839.svg', // bookmark icon\n\n  // Optional: restrict to power users\n  // audience: [ns.solid('PowerUser')],\n\n  /**\n   * Label function - determines if this pane is relevant\n   *\n   * MUST be synchronous and lightweight!\n   * Called for every subject the user views.\n   *\n   * @param {NamedNode} subject - The RDF resource being viewed\n   * @param {Object} context - Contains session, dom, etc.\n   * @returns {string|null} - Tooltip string if relevant, null if not\n   */\n  label: function (subject, context) {\n    const kb = context.session.store\n    const rdfType = ns.rdf('type')\n    const bookmarkType = schema('Bookmark')\n\n    // Check if subject is a Bookmark\n    if (kb.holds(subject, rdfType, bookmarkType)) {\n      return 'Bookmark'\n    }\n\n    // Check if subject is a container with bookmarks\n    if (kb.holds(subject, rdfType, ns.ldp('Container')) ||\n        kb.holds(subject, rdfType, ns.ldp('BasicContainer'))) {\n      const contents = kb.each(subject, ns.ldp('contains'))\n      const hasBookmarks = contents.some(item =>\n        kb.holds(item, rdfType, bookmarkType)\n      )\n      if (hasBookmarks) {\n        return 'Bookmarks'\n      }\n    }\n\n    return null\n  },\n\n  /**\n   * Render function - creates the UI\n   *\n   * Can be async! The outline manager handles Promise returns.\n   * Use dynamic import() to load the full implementation.\n   *\n   * @param {NamedNode} subject - The RDF resource to render\n   * @param {Object} context - Contains session, dom, etc.\n   * @param {Object} options - Additional render options\n   * @returns {Promise<HTMLElement>} - The rendered pane\n   */\n  render: async function (subject, context, options) {\n    try {\n      const mod = await import(\n        /* webpackChunkName: \"bookmark-pane\" */\n        './bookmarkRender.js'\n      )\n      return mod.render(subject, context, options)\n    } catch (e) {\n      console.error('Bookmark pane error:', e)\n      const div = document.createElement('div')\n      div.textContent = 'Error loading bookmark pane: ' + e.message\n      return div\n    }\n  },\n\n  /**\n   * MintNew - creates a new bookmark\n   *\n   * Called when user wants to create a new instance of this type.\n   *\n   * @param {Object} context - Contains session, dom, etc.\n   * @param {Object} options - Contains newBase (suggested URI base)\n   * @returns {Promise<NamedNode>} - The newly created resource\n   */\n  mintNew: async function (context, options) {\n    const { mintNew } = await import(\n      /* webpackChunkName: \"bookmark-pane\" */\n      './bookmarkRender.js'\n    )\n    return mintNew(context, options)\n  },\n\n  // RDF class this pane can create\n  mintClass: schema('Bookmark')\n}\n\n// Also export as default for standalone use\nexport default bookmarkPane\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,OAAO,KAAKA,EAAE,MAAM,cAAc;AAClC,OAAO,KAAKC,IAAI,MAAM,QAAQ;AAE9B,MAAMC,EAAE,GAAGF,EAAE,CAACE,EAAE;;AAEhB;AACA,MAAMC,MAAM,GAAGF,IAAI,CAACG,SAAS,CAAC,oBAAoB,CAAC;AAEnD,OAAO,MAAMC,YAAY,GAAG;EAC1B;EACAC,IAAI,EAAE,UAAU;EAEhB;EACAC,IAAI,EAAEP,EAAE,CAACQ,KAAK,CAACC,QAAQ,GAAG,gBAAgB;EAAE;;EAE5C;EACA;;EAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMC,EAAE,GAAGD,OAAO,CAACE,OAAO,CAACC,KAAK;IAChC,MAAMC,OAAO,GAAGd,EAAE,CAACe,GAAG,CAAC,MAAM,CAAC;IAC9B,MAAMC,YAAY,GAAGf,MAAM,CAAC,UAAU,CAAC;;IAEvC;IACA,IAAIU,EAAE,CAACM,KAAK,CAACR,OAAO,EAAEK,OAAO,EAAEE,YAAY,CAAC,EAAE;MAC5C,OAAO,UAAU;IACnB;;IAEA;IACA,IAAIL,EAAE,CAACM,KAAK,CAACR,OAAO,EAAEK,OAAO,EAAEd,EAAE,CAACkB,GAAG,CAAC,WAAW,CAAC,CAAC,IAC/CP,EAAE,CAACM,KAAK,CAACR,OAAO,EAAEK,OAAO,EAAEd,EAAE,CAACkB,GAAG,CAAC,gBAAgB,CAAC,CAAC,EAAE;MACxD,MAAMC,QAAQ,GAAGR,EAAE,CAACS,IAAI,CAACX,OAAO,EAAET,EAAE,CAACkB,GAAG,CAAC,UAAU,CAAC,CAAC;MACrD,MAAMG,YAAY,GAAGF,QAAQ,CAACG,IAAI,CAACC,IAAI,IACrCZ,EAAE,CAACM,KAAK,CAACM,IAAI,EAAET,OAAO,EAAEE,YAAY,CACtC,CAAC;MACD,IAAIK,YAAY,EAAE;QAChB,OAAO,WAAW;MACpB;IACF;IAEA,OAAO,IAAI;EACb,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEG,MAAM,EAAE,eAAAA,CAAgBf,OAAO,EAAEC,OAAO,EAAEe,OAAO,EAAE;IACjD,IAAI;MACF,MAAMC,GAAG,GAAG,MAAM,MAAM,CACtB;MACA,qBACF,CAAC;MACD,OAAOA,GAAG,CAACF,MAAM,CAACf,OAAO,EAAEC,OAAO,EAAEe,OAAO,CAAC;IAC9C,CAAC,CAAC,OAAOE,CAAC,EAAE;MACVC,OAAO,CAACC,KAAK,CAAC,sBAAsB,EAAEF,CAAC,CAAC;MACxC,MAAMG,GAAG,GAAGC,QAAQ,CAACC,aAAa,CAAC,KAAK,CAAC;MACzCF,GAAG,CAACG,WAAW,GAAG,+BAA+B,GAAGN,CAAC,CAACO,OAAO;MAC7D,OAAOJ,GAAG;IACZ;EACF,CAAC;EAED;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEK,OAAO,EAAE,eAAAA,CAAgBzB,OAAO,EAAEe,OAAO,EAAE;IACzC,MAAM;MAAEU;IAAQ,CAAC,GAAG,MAAM,MAAM,CAC9B;IACA,qBACF,CAAC;IACD,OAAOA,OAAO,CAACzB,OAAO,EAAEe,OAAO,CAAC;EAClC,CAAC;EAED;EACAW,SAAS,EAAEnC,MAAM,CAAC,UAAU;AAC9B,CAAC;;AAED;AACA,eAAeE,YAAY","ignoreList":[]}