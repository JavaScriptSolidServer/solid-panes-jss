{"version":3,"file":"bookmarkRender.js","names":["UI","$rdf","store","ns","schema","Namespace","dom","document","renderBookmark","subject","context","container","kb","session","div","createElement","className","name","anyValue","url","any","description","dateCreated","title","link","href","uri","value","target","rel","textContent","appendChild","urlDiv","desc","date","Date","toLocaleDateString","deleteBtn","onclick","confirm","triples","statementsMatching","doc","updater","update","remove","e","alert","message","renderAddForm","containerUri","onAdd","form","innerHTML","onsubmit","preventDefault","formData","FormData","get","id","now","bookmarkUri","sym","ins","st","rdf","toISOString","push","reset","render","options","style","header","types","findTypeURIs","isContainer","ldp","isBookmark","list","contents","each","bookmarks","filter","item","itemTypes","length","empty","forEach","bookmark","addForm","newBookmark","querySelector","mintNew","newBase","space","Error"],"sources":["../../src/lazy/bookmarkRender.js"],"sourcesContent":["/**\n * Bookmark Pane - Full Implementation\n *\n * This file is lazy-loaded only when the user views a bookmark.\n * It contains all the heavy logic: UI rendering, RDF queries, updates.\n */\n\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\nimport { store } from 'solid-logic-jss'\n\nconst ns = UI.ns\nconst schema = $rdf.Namespace('http://schema.org/')\nconst dom = document\n\n/**\n * Render a single bookmark\n */\nfunction renderBookmark(subject, context, container) {\n  const kb = context.session.store\n  const div = dom.createElement('div')\n  div.className = 'bookmark-item'\n\n  // Get bookmark properties\n  const name = kb.anyValue(subject, schema('name')) || 'Untitled'\n  const url = kb.any(subject, schema('url'))\n  const description = kb.anyValue(subject, schema('description'))\n  const dateCreated = kb.anyValue(subject, schema('dateCreated'))\n\n  // Title\n  const title = dom.createElement('h3')\n  title.className = 'bookmark-title'\n  if (url) {\n    const link = dom.createElement('a')\n    link.href = url.uri || url.value\n    link.target = '_blank'\n    link.rel = 'noopener noreferrer'\n    link.textContent = name\n    title.appendChild(link)\n  } else {\n    title.textContent = name\n  }\n  div.appendChild(title)\n\n  // URL display\n  if (url) {\n    const urlDiv = dom.createElement('div')\n    urlDiv.className = 'bookmark-url'\n    urlDiv.textContent = url.uri || url.value\n    div.appendChild(urlDiv)\n  }\n\n  // Description\n  if (description) {\n    const desc = dom.createElement('p')\n    desc.className = 'bookmark-description'\n    desc.textContent = description\n    div.appendChild(desc)\n  }\n\n  // Date\n  if (dateCreated) {\n    const date = dom.createElement('div')\n    date.className = 'bookmark-date'\n    date.textContent = 'Added: ' + new Date(dateCreated).toLocaleDateString()\n    div.appendChild(date)\n  }\n\n  // Delete button (if user has write access)\n  const deleteBtn = dom.createElement('button')\n  deleteBtn.className = 'bookmark-delete'\n  deleteBtn.textContent = 'Ã—'\n  deleteBtn.title = 'Delete bookmark'\n  deleteBtn.onclick = async () => {\n    if (confirm('Delete this bookmark?')) {\n      try {\n        // Remove all triples about this bookmark\n        const triples = kb.statementsMatching(subject, null, null, subject.doc())\n        await store.updater.update(triples, [])\n        div.remove()\n      } catch (e) {\n        alert('Failed to delete: ' + e.message)\n      }\n    }\n  }\n  div.appendChild(deleteBtn)\n\n  return div\n}\n\n/**\n * Render the add bookmark form\n */\nfunction renderAddForm(containerUri, context, onAdd) {\n  const form = dom.createElement('form')\n  form.className = 'bookmark-add-form'\n\n  form.innerHTML = `\n    <h4>Add Bookmark</h4>\n    <input type=\"text\" name=\"name\" placeholder=\"Title\" required />\n    <input type=\"url\" name=\"url\" placeholder=\"https://example.com\" required />\n    <textarea name=\"description\" placeholder=\"Description (optional)\"></textarea>\n    <button type=\"submit\">Add Bookmark</button>\n  `\n\n  form.onsubmit = async (e) => {\n    e.preventDefault()\n    const formData = new FormData(form)\n    const name = formData.get('name')\n    const url = formData.get('url')\n    const description = formData.get('description')\n\n    try {\n      // Generate unique ID\n      const id = 'bookmark-' + Date.now()\n      const bookmarkUri = containerUri + '#' + id\n      const subject = $rdf.sym(bookmarkUri)\n      const doc = $rdf.sym(containerUri)\n\n      // Create triples\n      const ins = [\n        $rdf.st(subject, ns.rdf('type'), schema('Bookmark'), doc),\n        $rdf.st(subject, schema('name'), name, doc),\n        $rdf.st(subject, schema('url'), $rdf.sym(url), doc),\n        $rdf.st(subject, schema('dateCreated'), new Date().toISOString(), doc)\n      ]\n\n      if (description) {\n        ins.push($rdf.st(subject, schema('description'), description, doc))\n      }\n\n      await store.updater.update([], ins)\n\n      // Clear form and refresh\n      form.reset()\n      if (onAdd) onAdd(subject)\n\n    } catch (e) {\n      alert('Failed to add bookmark: ' + e.message)\n    }\n  }\n\n  return form\n}\n\n/**\n * Main render function\n */\nexport function render(subject, context, options) {\n  const kb = context.session.store\n  const div = dom.createElement('div')\n  div.className = 'bookmark-pane'\n\n  // Add styles\n  const style = dom.createElement('style')\n  style.textContent = `\n    .bookmark-pane {\n      padding: 1em;\n      font-family: system-ui, sans-serif;\n    }\n    .bookmark-item {\n      border: 1px solid #ddd;\n      border-radius: 8px;\n      padding: 1em;\n      margin-bottom: 1em;\n      position: relative;\n      background: #fafafa;\n    }\n    .bookmark-title {\n      margin: 0 0 0.5em 0;\n      font-size: 1.2em;\n    }\n    .bookmark-title a {\n      color: #0066cc;\n      text-decoration: none;\n    }\n    .bookmark-title a:hover {\n      text-decoration: underline;\n    }\n    .bookmark-url {\n      color: #666;\n      font-size: 0.9em;\n      margin-bottom: 0.5em;\n    }\n    .bookmark-description {\n      margin: 0.5em 0;\n      color: #333;\n    }\n    .bookmark-date {\n      font-size: 0.8em;\n      color: #999;\n    }\n    .bookmark-delete {\n      position: absolute;\n      top: 0.5em;\n      right: 0.5em;\n      background: #ff4444;\n      color: white;\n      border: none;\n      border-radius: 50%;\n      width: 24px;\n      height: 24px;\n      cursor: pointer;\n      font-size: 16px;\n      line-height: 1;\n    }\n    .bookmark-delete:hover {\n      background: #cc0000;\n    }\n    .bookmark-add-form {\n      border: 2px dashed #ccc;\n      border-radius: 8px;\n      padding: 1em;\n      margin-top: 1em;\n    }\n    .bookmark-add-form h4 {\n      margin: 0 0 1em 0;\n    }\n    .bookmark-add-form input,\n    .bookmark-add-form textarea {\n      display: block;\n      width: 100%;\n      padding: 0.5em;\n      margin-bottom: 0.5em;\n      border: 1px solid #ccc;\n      border-radius: 4px;\n      box-sizing: border-box;\n    }\n    .bookmark-add-form button {\n      background: #0066cc;\n      color: white;\n      border: none;\n      padding: 0.5em 1em;\n      border-radius: 4px;\n      cursor: pointer;\n    }\n    .bookmark-add-form button:hover {\n      background: #0055aa;\n    }\n    .bookmark-empty {\n      color: #666;\n      font-style: italic;\n      padding: 2em;\n      text-align: center;\n    }\n  `\n  div.appendChild(style)\n\n  // Header\n  const header = dom.createElement('h2')\n  header.textContent = 'ðŸ”– Bookmarks'\n  div.appendChild(header)\n\n  // Check what we're rendering\n  const types = kb.findTypeURIs(subject)\n  const isContainer = types[ns.ldp('Container').uri] || types[ns.ldp('BasicContainer').uri]\n  const isBookmark = types[schema('Bookmark').uri]\n\n  // Bookmark list container\n  const list = dom.createElement('div')\n  list.className = 'bookmark-list'\n  div.appendChild(list)\n\n  if (isBookmark) {\n    // Single bookmark view\n    list.appendChild(renderBookmark(subject, context, list))\n  } else if (isContainer) {\n    // Container with bookmarks\n    const contents = kb.each(subject, ns.ldp('contains'))\n    const bookmarks = contents.filter(item => {\n      const itemTypes = kb.findTypeURIs(item)\n      return itemTypes[schema('Bookmark').uri]\n    })\n\n    if (bookmarks.length === 0) {\n      const empty = dom.createElement('div')\n      empty.className = 'bookmark-empty'\n      empty.textContent = 'No bookmarks yet. Add one below!'\n      list.appendChild(empty)\n    } else {\n      bookmarks.forEach(bookmark => {\n        list.appendChild(renderBookmark(bookmark, context, list))\n      })\n    }\n\n    // Add form for containers\n    const addForm = renderAddForm(subject.uri, context, (newBookmark) => {\n      // Remove empty message if present\n      const empty = list.querySelector('.bookmark-empty')\n      if (empty) empty.remove()\n      // Add new bookmark to list\n      list.appendChild(renderBookmark(newBookmark, context, list))\n    })\n    div.appendChild(addForm)\n  }\n\n  return div\n}\n\n/**\n * Create a new bookmark resource\n */\nexport async function mintNew(context, options) {\n  const newBase = options.newBase || context.session.store.any(null, ns.space('preferencesFile'))?.uri\n  if (!newBase) {\n    throw new Error('No location specified for new bookmark')\n  }\n\n  const bookmarkUri = newBase + 'bookmarks.ttl'\n  const subject = $rdf.sym(bookmarkUri + '#bookmark-' + Date.now())\n  const doc = $rdf.sym(bookmarkUri)\n\n  // Create minimal bookmark\n  const ins = [\n    $rdf.st(subject, ns.rdf('type'), schema('Bookmark'), doc),\n    $rdf.st(subject, schema('name'), 'New Bookmark', doc),\n    $rdf.st(subject, schema('dateCreated'), new Date().toISOString(), doc)\n  ]\n\n  await store.updater.update([], ins)\n  return subject\n}\n"],"mappings":"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","ignoreList":[]}