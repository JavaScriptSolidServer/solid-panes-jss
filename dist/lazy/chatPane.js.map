{"version":3,"file":"chatPane.js","names":["UI","ns","longChatPane","icon","icons","iconBase","name","label","subject","context","kb","session","store","holds","rdf","meeting","sioc","any","dct","render","realPane","mintNew","newPaneOptions","mintClass","shortChatPane","n","each","wf","length","undefined","foaf"],"sources":["../../src/lazy/chatPane.js"],"sourcesContent":["/**\n * Lazy-loaded chat pane wrappers\n *\n * Only loads chat-pane (and its UI.messageArea/infiniteMessageArea deps)\n * when the pane is actually rendered. This allows chat to be code-split\n * into a separate chunk.\n */\nimport * as UI from 'solid-ui-jss'\n\nconst ns = UI.ns\n\n/**\n * Long Chat Pane - lazy wrapper\n * Used for LongChat, Thread, and message types\n */\nexport const longChatPane = {\n  icon: UI.icons.iconBase + 'noun_1689339.svg',\n  name: 'long chat',\n\n  // Label determines if pane is relevant - must be sync\n  label: function (subject, context) {\n    const kb = context.session.store\n    if (kb.holds(subject, ns.rdf('type'), ns.meeting('LongChat'))) {\n      return 'Chat channel'\n    }\n    if (kb.holds(subject, ns.rdf('type'), ns.sioc('Thread'))) {\n      return 'Thread'\n    }\n    // Message detection\n    if (kb.any(subject, ns.sioc('content')) && kb.any(subject, ns.dct('created'))) {\n      return 'message'\n    }\n    return null\n  },\n\n  // Lazy render - loads chat-pane chunk only when needed\n  render: async function (subject, context) {\n    const { longChatPane: realPane } = await import(/* webpackChunkName: \"chat-pane\" */ 'chat-pane')\n    return realPane.render(subject, context)\n  },\n\n  // Lazy mintNew\n  mintNew: async function (context, newPaneOptions) {\n    const { longChatPane: realPane } = await import(/* webpackChunkName: \"chat-pane\" */ 'chat-pane')\n    return realPane.mintNew(context, newPaneOptions)\n  },\n\n  mintClass: ns.meeting('LongChat')\n}\n\n/**\n * Short Chat Pane - lazy wrapper\n * Used for wf:message based chats and meeting chats\n */\nexport const shortChatPane = {\n  icon: UI.icons.iconBase + 'noun_346319.svg',\n  name: 'chat',\n\n  label: function (subject, context) {\n    const kb = context.session.store\n    const n = kb.each(subject, ns.wf('message')).length\n    if (n > 0) return 'Chat (' + n + ')'\n\n    if (kb.holds(subject, ns.rdf('type'), ns.meeting('Chat'))) {\n      return 'Meeting chat'\n    }\n    if (kb.holds(undefined, ns.rdf('type'), ns.foaf('ChatChannel'), subject)) {\n      return 'IRC log'\n    }\n    return null\n  },\n\n  render: async function (subject, context) {\n    const { shortChatPane: realPane } = await import(/* webpackChunkName: \"chat-pane\" */ 'chat-pane')\n    return realPane.render(subject, context)\n  },\n\n  mintNew: async function (context, newPaneOptions) {\n    const { shortChatPane: realPane } = await import(/* webpackChunkName: \"chat-pane\" */ 'chat-pane')\n    return realPane.mintNew(context, newPaneOptions)\n  },\n\n  mintClass: ns.meeting('Chat')\n}\n"],"mappings":"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","ignoreList":[]}