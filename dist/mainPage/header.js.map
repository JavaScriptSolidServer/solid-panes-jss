{"version":3,"file":"header.js","names":["_solidLogicJss","require","_solidUiJss","HELP_MENU_ICON","icons","iconBase","SOLID_ICON_URL","USER_GUIDE_MENU_ITEM","REPORT_A_PROBLEM_MENU_ITEM","SHOW_YOUR_PROFILE_MENU_ITEM","LOG_OUT_MENU_ITEM","USER_GUIDE_MENU_URL","REPORT_A_PROBLEM_MENU_URL","createHeader","store","outliner","initHeader","setUserMenu","setHeaderOptions","helpMenuList","label","url","target","headerOptions","logo","helpIcon","showProfile","onclick","openUserProfile","logOut","authSession","logout","userMenuList","concat","getMenuItems","push","GotoSubject","authn","currentUser","undefined","location","reload","items","getDashboardItems","map","element","openDashboardPane","tabName","paneName","pane","showDashboard"],"sources":["../../src/mainPage/header.ts"],"sourcesContent":["import { authSession, authn } from 'solid-logic-jss'\nimport { icons, initHeader } from 'solid-ui-jss'\n/**\n * menu icons\n*/\nconst HELP_MENU_ICON = icons.iconBase + 'noun_help.svg'\nconst SOLID_ICON_URL = 'https://solidproject.org/assets/img/solid-emblem.svg'\n\n/**\n * menu elements\n*/\nconst USER_GUIDE_MENU_ITEM = 'User guide'\nconst REPORT_A_PROBLEM_MENU_ITEM = 'Report a problem'\nconst SHOW_YOUR_PROFILE_MENU_ITEM = 'Show your profile'\nconst LOG_OUT_MENU_ITEM = 'Log out'\n\ntype UserMenuItem = { label: string; onclick: () => void }\n/**\n * URLS\n */\nconst USER_GUIDE_MENU_URL = 'https://solidos.github.io/userguide/'\nconst REPORT_A_PROBLEM_MENU_URL = 'https://github.com/solidos/solidos/issues'\n\nexport async function createHeader (store, outliner) {\n  initHeader(store, await setUserMenu(outliner), setHeaderOptions())\n}\n\nfunction setHeaderOptions () {\n  const helpMenuList = [\n    { label: USER_GUIDE_MENU_ITEM, url: USER_GUIDE_MENU_URL, target: '_blank' },\n    { label: REPORT_A_PROBLEM_MENU_ITEM, url: REPORT_A_PROBLEM_MENU_URL, target: '_blank' }\n  ]\n  const headerOptions = { logo: SOLID_ICON_URL, helpIcon: HELP_MENU_ICON, helpMenuList }\n\n  return headerOptions\n}\n\nasync function setUserMenu (outliner: any) {\n  // @ts-ignore: showProfile is used conditionally\n  const showProfile = {\n    label: SHOW_YOUR_PROFILE_MENU_ITEM,\n    onclick: () => openUserProfile(outliner)\n  }\n\n  const logOut: UserMenuItem = {\n    label: LOG_OUT_MENU_ITEM,\n    onclick: () => {\n      authSession.logout()\n    }\n  }\n\n  // the order of the menu is important here, show profile first and logout last\n  let userMenuList:UserMenuItem[] = [] // was [showProfile]\n  userMenuList = userMenuList.concat(await getMenuItems(outliner))\n  userMenuList.push(logOut)\n\n  return userMenuList\n}\n\n// Does not work to jump to user profile,\nfunction openUserProfile (outliner: any) {\n  outliner.GotoSubject(authn.currentUser(), true, undefined, true, undefined)\n  location.reload()\n}\n\nasync function getMenuItems (outliner: any) {\n  const items = await outliner.getDashboardItems()\n  return items.map((element) => {\n    return {\n      label: element.label,\n      onclick: () => openDashboardPane(outliner, element.tabName || element.paneName)\n    }\n  })\n}\n\nasync function openDashboardPane (outliner: any, pane: string): Promise<void> {\n  outliner.showDashboard({\n    pane\n  })\n}\n"],"mappings":";;;;;;AAAA,IAAAA,cAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA;AACA;AACA;AACA,MAAME,cAAc,GAAGC,iBAAK,CAACC,QAAQ,GAAG,eAAe;AACvD,MAAMC,cAAc,GAAG,sDAAsD;;AAE7E;AACA;AACA;AACA,MAAMC,oBAAoB,GAAG,YAAY;AACzC,MAAMC,0BAA0B,GAAG,kBAAkB;AACrD,MAAMC,2BAA2B,GAAG,mBAAmB;AACvD,MAAMC,iBAAiB,GAAG,SAAS;AAGnC;AACA;AACA;AACA,MAAMC,mBAAmB,GAAG,sCAAsC;AAClE,MAAMC,yBAAyB,GAAG,2CAA2C;AAEtE,eAAeC,YAAYA,CAAEC,KAAK,EAAEC,QAAQ,EAAE;EACnD,IAAAC,sBAAU,EAACF,KAAK,EAAE,MAAMG,WAAW,CAACF,QAAQ,CAAC,EAAEG,gBAAgB,CAAC,CAAC,CAAC;AACpE;AAEA,SAASA,gBAAgBA,CAAA,EAAI;EAC3B,MAAMC,YAAY,GAAG,CACnB;IAAEC,KAAK,EAAEb,oBAAoB;IAAEc,GAAG,EAAEV,mBAAmB;IAAEW,MAAM,EAAE;EAAS,CAAC,EAC3E;IAAEF,KAAK,EAAEZ,0BAA0B;IAAEa,GAAG,EAAET,yBAAyB;IAAEU,MAAM,EAAE;EAAS,CAAC,CACxF;EACD,MAAMC,aAAa,GAAG;IAAEC,IAAI,EAAElB,cAAc;IAAEmB,QAAQ,EAAEtB,cAAc;IAAEgB;EAAa,CAAC;EAEtF,OAAOI,aAAa;AACtB;AAEA,eAAeN,WAAWA,CAAEF,QAAa,EAAE;EACzC;EACA,MAAMW,WAAW,GAAG;IAClBN,KAAK,EAAEX,2BAA2B;IAClCkB,OAAO,EAAEA,CAAA,KAAMC,eAAe,CAACb,QAAQ;EACzC,CAAC;EAED,MAAMc,MAAoB,GAAG;IAC3BT,KAAK,EAAEV,iBAAiB;IACxBiB,OAAO,EAAEA,CAAA,KAAM;MACbG,0BAAW,CAACC,MAAM,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,IAAIC,YAA2B,GAAG,EAAE,EAAC;EACrCA,YAAY,GAAGA,YAAY,CAACC,MAAM,CAAC,MAAMC,YAAY,CAACnB,QAAQ,CAAC,CAAC;EAChEiB,YAAY,CAACG,IAAI,CAACN,MAAM,CAAC;EAEzB,OAAOG,YAAY;AACrB;;AAEA;AACA,SAASJ,eAAeA,CAAEb,QAAa,EAAE;EACvCA,QAAQ,CAACqB,WAAW,CAACC,oBAAK,CAACC,WAAW,CAAC,CAAC,EAAE,IAAI,EAAEC,SAAS,EAAE,IAAI,EAAEA,SAAS,CAAC;EAC3EC,QAAQ,CAACC,MAAM,CAAC,CAAC;AACnB;AAEA,eAAeP,YAAYA,CAAEnB,QAAa,EAAE;EAC1C,MAAM2B,KAAK,GAAG,MAAM3B,QAAQ,CAAC4B,iBAAiB,CAAC,CAAC;EAChD,OAAOD,KAAK,CAACE,GAAG,CAAEC,OAAO,IAAK;IAC5B,OAAO;MACLzB,KAAK,EAAEyB,OAAO,CAACzB,KAAK;MACpBO,OAAO,EAAEA,CAAA,KAAMmB,iBAAiB,CAAC/B,QAAQ,EAAE8B,OAAO,CAACE,OAAO,IAAIF,OAAO,CAACG,QAAQ;IAChF,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,eAAeF,iBAAiBA,CAAE/B,QAAa,EAAEkC,IAAY,EAAiB;EAC5ElC,QAAQ,CAACmC,aAAa,CAAC;IACrBD;EACF,CAAC,CAAC;AACJ","ignoreList":[]}