{"version":3,"file":"header.js","names":["authSession","authn","icons","initHeader","HELP_MENU_ICON","iconBase","SOLID_ICON_URL","USER_GUIDE_MENU_ITEM","REPORT_A_PROBLEM_MENU_ITEM","SHOW_YOUR_PROFILE_MENU_ITEM","LOG_OUT_MENU_ITEM","USER_GUIDE_MENU_URL","REPORT_A_PROBLEM_MENU_URL","createHeader","store","outliner","setUserMenu","setHeaderOptions","helpMenuList","label","url","target","headerOptions","logo","helpIcon","showProfile","onclick","openUserProfile","logOut","logout","userMenuList","concat","getMenuItems","push","GotoSubject","currentUser","undefined","location","reload","items","getDashboardItems","map","element","openDashboardPane","tabName","paneName","pane","showDashboard"],"sources":["../../src/mainPage/header.ts"],"sourcesContent":["import { authSession, authn } from 'solid-logic-jss'\nimport { icons, initHeader } from 'solid-ui-jss'\n/**\n * menu icons\n*/\nconst HELP_MENU_ICON = icons.iconBase + 'noun_help.svg'\nconst SOLID_ICON_URL = 'https://solidproject.org/assets/img/solid-emblem.svg'\n\n/**\n * menu elements\n*/\nconst USER_GUIDE_MENU_ITEM = 'User guide'\nconst REPORT_A_PROBLEM_MENU_ITEM = 'Report a problem'\nconst SHOW_YOUR_PROFILE_MENU_ITEM = 'Show your profile'\nconst LOG_OUT_MENU_ITEM = 'Log out'\n\ntype UserMenuItem = { label: string; onclick: () => void }\n/**\n * URLS\n */\nconst USER_GUIDE_MENU_URL = 'https://solidos.github.io/userguide/'\nconst REPORT_A_PROBLEM_MENU_URL = 'https://github.com/solidos/solidos/issues'\n\nexport async function createHeader (store, outliner) {\n  initHeader(store, await setUserMenu(outliner), setHeaderOptions())\n}\n\nfunction setHeaderOptions () {\n  const helpMenuList = [\n    { label: USER_GUIDE_MENU_ITEM, url: USER_GUIDE_MENU_URL, target: '_blank' },\n    { label: REPORT_A_PROBLEM_MENU_ITEM, url: REPORT_A_PROBLEM_MENU_URL, target: '_blank' }\n  ]\n  const headerOptions = { logo: SOLID_ICON_URL, helpIcon: HELP_MENU_ICON, helpMenuList }\n\n  return headerOptions\n}\n\nasync function setUserMenu (outliner: any) {\n  // @ts-ignore: showProfile is used conditionally\n  const showProfile = {\n    label: SHOW_YOUR_PROFILE_MENU_ITEM,\n    onclick: () => openUserProfile(outliner)\n  }\n\n  const logOut: UserMenuItem = {\n    label: LOG_OUT_MENU_ITEM,\n    onclick: () => {\n      authSession.logout()\n    }\n  }\n\n  // the order of the menu is important here, show profile first and logout last\n  let userMenuList:UserMenuItem[] = [] // was [showProfile]\n  userMenuList = userMenuList.concat(await getMenuItems(outliner))\n  userMenuList.push(logOut)\n\n  return userMenuList\n}\n\n// Does not work to jump to user profile,\nfunction openUserProfile (outliner: any) {\n  outliner.GotoSubject(authn.currentUser(), true, undefined, true, undefined)\n  location.reload()\n}\n\nasync function getMenuItems (outliner: any) {\n  const items = await outliner.getDashboardItems()\n  return items.map((element) => {\n    return {\n      label: element.label,\n      onclick: () => openDashboardPane(outliner, element.tabName || element.paneName)\n    }\n  })\n}\n\nasync function openDashboardPane (outliner: any, pane: string): Promise<void> {\n  outliner.showDashboard({\n    pane\n  })\n}\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,KAAK,QAAQ,iBAAiB;AACpD,SAASC,KAAK,EAAEC,UAAU,QAAQ,cAAc;AAChD;AACA;AACA;AACA,MAAMC,cAAc,GAAGF,KAAK,CAACG,QAAQ,GAAG,eAAe;AACvD,MAAMC,cAAc,GAAG,sDAAsD;;AAE7E;AACA;AACA;AACA,MAAMC,oBAAoB,GAAG,YAAY;AACzC,MAAMC,0BAA0B,GAAG,kBAAkB;AACrD,MAAMC,2BAA2B,GAAG,mBAAmB;AACvD,MAAMC,iBAAiB,GAAG,SAAS;AAGnC;AACA;AACA;AACA,MAAMC,mBAAmB,GAAG,sCAAsC;AAClE,MAAMC,yBAAyB,GAAG,2CAA2C;AAE7E,OAAO,eAAeC,YAAYA,CAAEC,KAAK,EAAEC,QAAQ,EAAE;EACnDZ,UAAU,CAACW,KAAK,EAAE,MAAME,WAAW,CAACD,QAAQ,CAAC,EAAEE,gBAAgB,CAAC,CAAC,CAAC;AACpE;AAEA,SAASA,gBAAgBA,CAAA,EAAI;EAC3B,MAAMC,YAAY,GAAG,CACnB;IAAEC,KAAK,EAAEZ,oBAAoB;IAAEa,GAAG,EAAET,mBAAmB;IAAEU,MAAM,EAAE;EAAS,CAAC,EAC3E;IAAEF,KAAK,EAAEX,0BAA0B;IAAEY,GAAG,EAAER,yBAAyB;IAAES,MAAM,EAAE;EAAS,CAAC,CACxF;EACD,MAAMC,aAAa,GAAG;IAAEC,IAAI,EAAEjB,cAAc;IAAEkB,QAAQ,EAAEpB,cAAc;IAAEc;EAAa,CAAC;EAEtF,OAAOI,aAAa;AACtB;AAEA,eAAeN,WAAWA,CAAED,QAAa,EAAE;EACzC;EACA,MAAMU,WAAW,GAAG;IAClBN,KAAK,EAAEV,2BAA2B;IAClCiB,OAAO,EAAEA,CAAA,KAAMC,eAAe,CAACZ,QAAQ;EACzC,CAAC;EAED,MAAMa,MAAoB,GAAG;IAC3BT,KAAK,EAAET,iBAAiB;IACxBgB,OAAO,EAAEA,CAAA,KAAM;MACb1B,WAAW,CAAC6B,MAAM,CAAC,CAAC;IACtB;EACF,CAAC;;EAED;EACA,IAAIC,YAA2B,GAAG,EAAE,EAAC;EACrCA,YAAY,GAAGA,YAAY,CAACC,MAAM,CAAC,MAAMC,YAAY,CAACjB,QAAQ,CAAC,CAAC;EAChEe,YAAY,CAACG,IAAI,CAACL,MAAM,CAAC;EAEzB,OAAOE,YAAY;AACrB;;AAEA;AACA,SAASH,eAAeA,CAAEZ,QAAa,EAAE;EACvCA,QAAQ,CAACmB,WAAW,CAACjC,KAAK,CAACkC,WAAW,CAAC,CAAC,EAAE,IAAI,EAAEC,SAAS,EAAE,IAAI,EAAEA,SAAS,CAAC;EAC3EC,QAAQ,CAACC,MAAM,CAAC,CAAC;AACnB;AAEA,eAAeN,YAAYA,CAAEjB,QAAa,EAAE;EAC1C,MAAMwB,KAAK,GAAG,MAAMxB,QAAQ,CAACyB,iBAAiB,CAAC,CAAC;EAChD,OAAOD,KAAK,CAACE,GAAG,CAAEC,OAAO,IAAK;IAC5B,OAAO;MACLvB,KAAK,EAAEuB,OAAO,CAACvB,KAAK;MACpBO,OAAO,EAAEA,CAAA,KAAMiB,iBAAiB,CAAC5B,QAAQ,EAAE2B,OAAO,CAACE,OAAO,IAAIF,OAAO,CAACG,QAAQ;IAChF,CAAC;EACH,CAAC,CAAC;AACJ;AAEA,eAAeF,iBAAiBA,CAAE5B,QAAa,EAAE+B,IAAY,EAAiB;EAC5E/B,QAAQ,CAACgC,aAAa,CAAC;IACrBD;EACF,CAAC,CAAC;AACJ","ignoreList":[]}