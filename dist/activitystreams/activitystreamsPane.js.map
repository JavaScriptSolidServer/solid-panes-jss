{"version":3,"file":"activitystreamsPane.js","names":["UI","_interopRequireWildcard","require","_rdflib","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","ns","styles","card","content","date","attribution","attributionLink","attributionImage","timeAgo","seconds","Math","floor","Date","intervals","label","interval","count","formatDate","formatted","toLocaleDateString","undefined","year","month","day","hour","minute","isPerson","store","node","types","findTypeURIs","as","uri","foaf","vcard","schema","readImageSrc","image","anyValue","sym","readAttribution","subject","attributedTo","any","type","name","webId","imageSrc","readNote","published","value","createAttributionElement","doc","container","createElement","setAttribute","link","textContent","appendChild","img","addEventListener","style","textDecoration","createNoteCard","note","dateEl","_default","exports","icon","icons","iconBase","context","session","render","dom","msg","attributionNode","fetcher","load","then","updatedAttribution","innerHTML","catch"],"sources":["../../src/activitystreams/activitystreamsPane.js"],"sourcesContent":["/**\n * ActivityStreams Pane - Vanilla JS rewrite\n *\n * Displays as:Note content as a styled card.\n * Replaces the React-based activitystreams-pane package (~11MB -> ~3KB)\n */\n\nimport * as UI from 'solid-ui-jss'\nimport { sym } from 'rdflib'\n\nconst ns = UI.ns\n\n// Styles for the note card\nconst styles = {\n  card: `\n    font-family: sans-serif;\n    display: flex;\n    flex-wrap: wrap;\n    border-radius: 4px;\n    flex-direction: column;\n    justify-content: center;\n    padding: 1em;\n    box-shadow: 0 1px 5px rgba(0,0,0,0.2);\n    transition: all .25s ease-in-out;\n    max-width: 632px;\n  `,\n  content: `\n    font-size: larger;\n    margin: 0.5em 0;\n  `,\n  date: `\n    color: rgba(0, 0, 0, 0.6);\n    margin: 0.5em 0;\n  `,\n  attribution: `\n    display: flex;\n    align-items: center;\n    font-weight: bold;\n  `,\n  attributionLink: `\n    color: black;\n    text-decoration: none;\n  `,\n  attributionImage: `\n    margin-right: 5px;\n    width: 47px;\n    height: 47px;\n    border-radius: 5px;\n    object-fit: cover;\n  `\n}\n\n/**\n * Format a date as relative time (e.g., \"2 hours ago\")\n */\nfunction timeAgo (date) {\n  const seconds = Math.floor((new Date() - date) / 1000)\n\n  const intervals = [\n    { label: 'year', seconds: 31536000 },\n    { label: 'month', seconds: 2592000 },\n    { label: 'week', seconds: 604800 },\n    { label: 'day', seconds: 86400 },\n    { label: 'hour', seconds: 3600 },\n    { label: 'minute', seconds: 60 }\n  ]\n\n  for (const interval of intervals) {\n    const count = Math.floor(seconds / interval.seconds)\n    if (count >= 1) {\n      return `${count} ${interval.label}${count > 1 ? 's' : ''} ago`\n    }\n  }\n  return 'just now'\n}\n\n/**\n * Format date for display\n */\nfunction formatDate (date) {\n  if (!date) return null\n  const formatted = date.toLocaleDateString(undefined, {\n    year: 'numeric',\n    month: '2-digit',\n    day: '2-digit',\n    hour: '2-digit',\n    minute: '2-digit'\n  })\n  return `${timeAgo(date)} Â· ${formatted}`\n}\n\n/**\n * Check if node is a Person type\n */\nfunction isPerson (store, node) {\n  const types = store.findTypeURIs(node)\n  return types[ns.as('Person').uri] ||\n         types[ns.foaf('Person').uri] ||\n         types[ns.vcard('Individual').uri] ||\n         types[ns.schema('Person').uri]\n}\n\n/**\n * Read person's image URL from store\n */\nfunction readImageSrc (store, node) {\n  const image = store.anyValue(node, ns.as('image'))\n  if (image) {\n    return store.anyValue(sym(image), ns.as('url')) || null\n  }\n  return store.anyValue(node, ns.foaf('img')) ||\n         store.anyValue(node, ns.vcard('hasPhoto')) ||\n         null\n}\n\n/**\n * Read attribution (author) info from store\n */\nfunction readAttribution (store, subject) {\n  const attributedTo = store.any(subject, ns.as('attributedTo'))\n\n  if (!attributedTo || !attributedTo.uri) {\n    return { type: 'none' }\n  }\n\n  if (isPerson(store, attributedTo)) {\n    const name = store.anyValue(attributedTo, ns.as('name')) ||\n                 store.anyValue(attributedTo, ns.foaf('name')) ||\n                 store.anyValue(attributedTo, ns.vcard('fn')) ||\n                 store.anyValue(attributedTo, ns.schema('name')) ||\n                 ''\n    return {\n      type: 'person',\n      webId: attributedTo.uri,\n      name,\n      imageSrc: readImageSrc(store, attributedTo)\n    }\n  }\n\n  return { type: 'link', uri: attributedTo.uri }\n}\n\n/**\n * Read note data from store\n */\nfunction readNote (store, subject) {\n  const content = store.any(subject, ns.as('content'))\n  const published = store.any(subject, ns.as('published'))\n\n  if (!content) return null\n\n  return {\n    content: content.value,\n    published: published ? new Date(published.value) : null,\n    attribution: readAttribution(store, subject)\n  }\n}\n\n/**\n * Create the attribution element\n */\nfunction createAttributionElement (doc, attribution) {\n  const container = doc.createElement('div')\n  container.setAttribute('style', styles.attribution)\n\n  if (attribution.type === 'none') {\n    return container\n  }\n\n  if (attribution.type === 'link') {\n    const link = doc.createElement('a')\n    link.setAttribute('href', attribution.uri)\n    link.setAttribute('style', styles.attributionLink)\n    link.textContent = attribution.uri\n    container.appendChild(link)\n    return container\n  }\n\n  if (attribution.type === 'person') {\n    if (attribution.imageSrc) {\n      const img = doc.createElement('img')\n      img.setAttribute('src', attribution.imageSrc)\n      img.setAttribute('alt', attribution.name)\n      img.setAttribute('style', styles.attributionImage)\n      container.appendChild(img)\n    }\n\n    const link = doc.createElement('a')\n    link.setAttribute('href', attribution.webId)\n    link.setAttribute('style', styles.attributionLink)\n    link.textContent = attribution.name || attribution.webId\n    link.addEventListener('mouseover', () => {\n      link.style.textDecoration = 'underline'\n    })\n    link.addEventListener('mouseout', () => {\n      link.style.textDecoration = 'none'\n    })\n    container.appendChild(link)\n  }\n\n  return container\n}\n\n/**\n * Create the note card element\n */\nfunction createNoteCard (doc, note) {\n  const card = doc.createElement('div')\n  card.setAttribute('style', styles.card)\n\n  // Attribution (author)\n  card.appendChild(createAttributionElement(doc, note.attribution))\n\n  // Content\n  const content = doc.createElement('p')\n  content.setAttribute('style', styles.content)\n  content.textContent = note.content\n  card.appendChild(content)\n\n  // Date\n  if (note.published) {\n    const dateEl = doc.createElement('p')\n    dateEl.setAttribute('style', styles.date)\n    dateEl.textContent = formatDate(note.published)\n    card.appendChild(dateEl)\n  }\n\n  return card\n}\n\n/**\n * The ActivityStreams Pane\n */\nexport default {\n  icon: UI.icons.iconBase + 'noun_15695.svg',\n\n  name: 'activitystreams',\n\n  label: function (subject, context) {\n    const store = context.session.store\n    const types = store.findTypeURIs(subject)\n    if (types[ns.as('Note').uri]) {\n      return 'Note'\n    }\n    return null\n  },\n\n  render: function (subject, context) {\n    const doc = context.dom\n    const store = context.session.store\n    const container = doc.createElement('div')\n\n    const note = readNote(store, subject)\n\n    if (!note) {\n      const msg = doc.createElement('p')\n      msg.textContent = 'Unable to read note content.'\n      container.appendChild(msg)\n      return container\n    }\n\n    // Render initial card\n    container.appendChild(createNoteCard(doc, note))\n\n    // If attribution is just a link, try to fetch and update\n    if (note.attribution.type === 'link') {\n      const attributionNode = sym(note.attribution.uri)\n      store.fetcher.load(attributionNode).then(() => {\n        // Re-read attribution after fetch\n        const updatedAttribution = readAttribution(store, subject)\n        if (updatedAttribution.type === 'person') {\n          note.attribution = updatedAttribution\n          container.innerHTML = ''\n          container.appendChild(createNoteCard(doc, note))\n        }\n      }).catch(() => {\n        // Keep original link attribution on error\n      })\n    }\n\n    return container\n  }\n}\n"],"mappings":"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","ignoreList":[]}