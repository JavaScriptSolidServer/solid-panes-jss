{"version":3,"file":"RDFXMLPane.js","names":["UI","$rdf","ns","RDFXMLPane","icon","icons","originalIconBase","name","audience","solid","label","subject","context","store","session","findTypeURIs","n","statementsMatching","undefined","length","render","myDocument","dom","kb","div","createElement","setAttribute","sts","sz","Serializer","suggestNamespaces","namespaces","setBase","uri","str","statementsToXML","pre","appendChild","createTextNode"],"sources":["../src/RDFXMLPane.js"],"sourcesContent":["/*      RDF/XML content Pane\n **\n **  This pane shows the content of a particular RDF resource\n ** or at least the RDF semantics we attribute to that resource,\n ** in generated N3 syntax.\n */\n\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\n\nconst ns = UI.ns\n\nexport const RDFXMLPane = {\n  icon: UI.icons.originalIconBase + '22-text-xml4.png',\n\n  name: 'RDFXML',\n\n  audience: [ns.solid('Developer')],\n\n  label: function (subject, context) {\n    const store = context.session.store\n    if (\n      'http://www.w3.org/2007/ont/link#ProtocolEvent' in\n      store.findTypeURIs(subject)\n    ) {\n      return null\n    }\n\n    const n = store.statementsMatching(undefined, undefined, undefined, subject)\n      .length\n    if (n === 0) return null\n    return 'As RDF/XML (' + n + ')'\n  },\n\n  render: function (subject, context) {\n    const myDocument = context.dom\n    const kb = context.session.store\n    const div = myDocument.createElement('div')\n    div.setAttribute('class', 'RDFXMLPane')\n    // Because of smushing etc, this will not be a copy of the original source\n    // We could instead either fetch and re-parse the source,\n    // or we could keep all the pre-smushed triples.\n    const sts = kb.statementsMatching(undefined, undefined, undefined, subject) // @@ slow with current store!\n    /*\n    var kludge = kb.formula([]) // No features\n    for (var i=0; i< sts.length; i++) {\n        s = sts[i]\n        kludge.add(s.subject, s.predicate, s.object)\n    }\n    */\n    const sz = $rdf.Serializer(kb)\n    sz.suggestNamespaces(kb.namespaces)\n    sz.setBase(subject.uri)\n    const str = sz.statementsToXML(sts)\n    const pre = myDocument.createElement('PRE')\n    pre.appendChild(myDocument.createTextNode(str))\n    div.appendChild(pre)\n    return div\n  }\n}\n\n// ends\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;;AAEA,OAAO,KAAKA,EAAE,MAAM,cAAc;AAClC,OAAO,KAAKC,IAAI,MAAM,QAAQ;AAE9B,MAAMC,EAAE,GAAGF,EAAE,CAACE,EAAE;AAEhB,OAAO,MAAMC,UAAU,GAAG;EACxBC,IAAI,EAAEJ,EAAE,CAACK,KAAK,CAACC,gBAAgB,GAAG,kBAAkB;EAEpDC,IAAI,EAAE,QAAQ;EAEdC,QAAQ,EAAE,CAACN,EAAE,CAACO,KAAK,CAAC,WAAW,CAAC,CAAC;EAEjCC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMC,KAAK,GAAGD,OAAO,CAACE,OAAO,CAACD,KAAK;IACnC,IACE,+CAA+C,IAC/CA,KAAK,CAACE,YAAY,CAACJ,OAAO,CAAC,EAC3B;MACA,OAAO,IAAI;IACb;IAEA,MAAMK,CAAC,GAAGH,KAAK,CAACI,kBAAkB,CAACC,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAEP,OAAO,CAAC,CACzEQ,MAAM;IACT,IAAIH,CAAC,KAAK,CAAC,EAAE,OAAO,IAAI;IACxB,OAAO,cAAc,GAAGA,CAAC,GAAG,GAAG;EACjC,CAAC;EAEDI,MAAM,EAAE,SAAAA,CAAUT,OAAO,EAAEC,OAAO,EAAE;IAClC,MAAMS,UAAU,GAAGT,OAAO,CAACU,GAAG;IAC9B,MAAMC,EAAE,GAAGX,OAAO,CAACE,OAAO,CAACD,KAAK;IAChC,MAAMW,GAAG,GAAGH,UAAU,CAACI,aAAa,CAAC,KAAK,CAAC;IAC3CD,GAAG,CAACE,YAAY,CAAC,OAAO,EAAE,YAAY,CAAC;IACvC;IACA;IACA;IACA,MAAMC,GAAG,GAAGJ,EAAE,CAACN,kBAAkB,CAACC,SAAS,EAAEA,SAAS,EAAEA,SAAS,EAAEP,OAAO,CAAC,EAAC;IAC5E;AACJ;AACA;AACA;AACA;AACA;AACA;IACI,MAAMiB,EAAE,GAAG3B,IAAI,CAAC4B,UAAU,CAACN,EAAE,CAAC;IAC9BK,EAAE,CAACE,iBAAiB,CAACP,EAAE,CAACQ,UAAU,CAAC;IACnCH,EAAE,CAACI,OAAO,CAACrB,OAAO,CAACsB,GAAG,CAAC;IACvB,MAAMC,GAAG,GAAGN,EAAE,CAACO,eAAe,CAACR,GAAG,CAAC;IACnC,MAAMS,GAAG,GAAGf,UAAU,CAACI,aAAa,CAAC,KAAK,CAAC;IAC3CW,GAAG,CAACC,WAAW,CAAChB,UAAU,CAACiB,cAAc,CAACJ,GAAG,CAAC,CAAC;IAC/CV,GAAG,CAACa,WAAW,CAACD,GAAG,CAAC;IACpB,OAAOZ,GAAG;EACZ;AACF,CAAC;;AAED","ignoreList":[]}