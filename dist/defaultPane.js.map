{"version":3,"file":"defaultPane.js","names":["UI","$rdf","ns","defaultPane","icon","icons","originalIconBase","name","audience","solid","label","_subject","render","subject","context","dom","filter","pred","inverse","session","paneRegistry","byName","predicates","uri","outliner","getOutliner","kb","store","log","info","location","canon","div","createElement","setAttribute","plist","statementsMatching","appendPropertyTRs","undefined","termType","value","slice","st","sym","link","updater","editable","Util","docpart","anyStatementMatching","why","holdingTr","holdingTd","img","src","addEventListener","addNewTripleIconMouseDownListener","e","UserInput","addNewPredicateObject","stopPropagation","preventDefault","className","appendChild"],"sources":["../src/defaultPane.js"],"sourcesContent":["/*   Default Pane\n **\n **  This outline pane contains the properties which are\n **  normally displayed to the user. See also: internalPane\n ** This pane hides the ones considered too low-level for the normal user.\n */\n\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\n\nconst ns = UI.ns\n\nexport const defaultPane = {\n  icon: UI.icons.originalIconBase + 'about.png',\n\n  name: 'default',\n\n  audience: [ns.solid('Developer')],\n\n  label: function (_subject) {\n    return 'about '\n  },\n\n  render: function (subject, context) {\n    const dom = context.dom\n\n    const filter = function (pred, inverse) {\n      if (\n        typeof context.session.paneRegistry.byName('internal').predicates[\n          pred.uri\n        ] !== 'undefined'\n      ) {\n        return false\n      }\n      if (\n        inverse &&\n        pred.uri === 'http://www.w3.org/1999/02/22-rdf-syntax-ns#type'\n      ) {\n        return false\n      }\n      return true\n    }\n\n    const outliner = context.getOutliner(dom)\n    const kb = context.session.store\n    // var outline = outliner; // @@\n    UI.log.info('@defaultPane.render, dom is now ' + dom.location)\n    subject = kb.canon(subject)\n    const div = dom.createElement('div')\n    div.setAttribute('class', 'defaultPane')\n    //        appendRemoveIcon(div, subject, div)\n\n    let plist = kb.statementsMatching(subject)\n    outliner.appendPropertyTRs(div, plist, false, filter)\n    plist = kb.statementsMatching(undefined, undefined, subject)\n    outliner.appendPropertyTRs(div, plist, true, filter)\n    if (\n      subject.termType === 'Literal' &&\n      subject.value.slice(0, 7) === 'http://'\n    ) {\n      outliner.appendPropertyTRs(\n        div,\n        [$rdf.st(kb.sym(subject.value), UI.ns.link('uri'), subject)],\n        true,\n        filter\n      )\n    }\n    if (\n      (subject.termType === 'NamedNode' &&\n        kb.updater.editable($rdf.Util.uri.docpart(subject.uri), kb)) ||\n      (subject.termType === 'BlankNode' &&\n        kb.anyStatementMatching(subject) &&\n        kb.anyStatementMatching(subject).why &&\n        kb.anyStatementMatching(subject).why.uri &&\n        kb.updater.editable(kb.anyStatementMatching(subject).why.uri))\n      // check the document containing something about of the bnode @@ what about as object?\n      /*  ! && HCIoptions[\"bottom insert highlights\"].enabled  */\n    ) {\n      const holdingTr = dom.createElement('tr') // these are to minimize required changes\n      const holdingTd = dom.createElement('td') // in userinput.js\n      holdingTd.setAttribute('colspan', '2')\n      holdingTd.setAttribute('notSelectable', 'true')\n      const img = dom.createElement('img')\n      img.src = UI.icons.originalIconBase + 'tango/22-list-add-new.png'\n      img.addEventListener('click', function addNewTripleIconMouseDownListener (\n        e\n      ) {\n        outliner.UserInput.addNewPredicateObject(e)\n        e.stopPropagation()\n        e.preventDefault()\n      })\n      img.className = 'bottom-border-active'\n      // img.addEventListener('click', thisOutline.UserInput.addNewPredicateObject,false)\n      div\n        .appendChild(holdingTr)\n        .appendChild(holdingTd)\n        .appendChild(img)\n    }\n    return div\n  }\n}\n\n// ends\n"],"mappings":"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","ignoreList":[]}