{"version":3,"file":"videoPane.js","names":["UI","_interopRequireWildcard","require","$rdf","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","_default","exports","icon","icons","iconBase","name","label","subject","context","kb","session","store","typeURIs","findTypeURIs","prefix","Util","mediaTypeClass","uri","split","startsWith","render","dom","div","createElement","video","appendChild","setAttribute","fetcher","_fetch","then","response","blob","myBlob","objectURL","URL","createObjectURL"],"sources":["../../src/video/videoPane.js"],"sourcesContent":["/*   Single video play Pane\n **\n */\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\n\nexport default {\n  icon: UI.icons.iconBase + 'noun_1619.svg',\n\n  name: 'video',\n\n  // Does the subject deserve an slideshow pane?\n  label: function (subject, context) {\n    const kb = context.session.store\n    const typeURIs = kb.findTypeURIs(subject)\n    const prefix = $rdf.Util.mediaTypeClass('video/*').uri.split('*')[0]\n    for (const t in typeURIs) {\n      if (t.startsWith(prefix)) return 'Play video'\n    }\n\n    return null\n  },\n\n  render: function (subject, context) {\n    const kb = context.session.store\n    const dom = context.dom\n    const div = dom.createElement('div')\n    const video = div.appendChild(dom.createElement('video'))\n    video.setAttribute('controls', 'yes')\n    // get video with authenticated fetch\n    kb.fetcher._fetch(subject.uri)\n      .then(function (response) {\n        return response.blob()\n      })\n      .then(function (myBlob) {\n        const objectURL = URL.createObjectURL(myBlob)\n        video.setAttribute('src', objectURL) // w640 h480 //\n      })\n\n    video.setAttribute('width', '100%')\n    return div\n  }\n}\n// ends\n"],"mappings":"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","ignoreList":[]}