{"version":3,"file":"videoPane.js","names":["UI","$rdf","icon","icons","iconBase","name","label","subject","context","kb","session","store","typeURIs","findTypeURIs","prefix","Util","mediaTypeClass","uri","split","t","startsWith","render","dom","div","createElement","video","appendChild","setAttribute","fetcher","_fetch","then","response","blob","myBlob","objectURL","URL","createObjectURL"],"sources":["../../src/video/videoPane.js"],"sourcesContent":["/*   Single video play Pane\n **\n */\nimport * as UI from 'solid-ui-jss'\nimport * as $rdf from 'rdflib'\n\nexport default {\n  icon: UI.icons.iconBase + 'noun_1619.svg',\n\n  name: 'video',\n\n  // Does the subject deserve an slideshow pane?\n  label: function (subject, context) {\n    const kb = context.session.store\n    const typeURIs = kb.findTypeURIs(subject)\n    const prefix = $rdf.Util.mediaTypeClass('video/*').uri.split('*')[0]\n    for (const t in typeURIs) {\n      if (t.startsWith(prefix)) return 'Play video'\n    }\n\n    return null\n  },\n\n  render: function (subject, context) {\n    const kb = context.session.store\n    const dom = context.dom\n    const div = dom.createElement('div')\n    const video = div.appendChild(dom.createElement('video'))\n    video.setAttribute('controls', 'yes')\n    // get video with authenticated fetch\n    kb.fetcher._fetch(subject.uri)\n      .then(function (response) {\n        return response.blob()\n      })\n      .then(function (myBlob) {\n        const objectURL = URL.createObjectURL(myBlob)\n        video.setAttribute('src', objectURL) // w640 h480 //\n      })\n\n    video.setAttribute('width', '100%')\n    return div\n  }\n}\n// ends\n"],"mappings":"AAAA;AACA;AACA;AACA,OAAO,KAAKA,EAAE,MAAM,cAAc;AAClC,OAAO,KAAKC,IAAI,MAAM,QAAQ;AAE9B,eAAe;EACbC,IAAI,EAAEF,EAAE,CAACG,KAAK,CAACC,QAAQ,GAAG,eAAe;EAEzCC,IAAI,EAAE,OAAO;EAEb;EACAC,KAAK,EAAE,SAAAA,CAAUC,OAAO,EAAEC,OAAO,EAAE;IACjC,MAAMC,EAAE,GAAGD,OAAO,CAACE,OAAO,CAACC,KAAK;IAChC,MAAMC,QAAQ,GAAGH,EAAE,CAACI,YAAY,CAACN,OAAO,CAAC;IACzC,MAAMO,MAAM,GAAGb,IAAI,CAACc,IAAI,CAACC,cAAc,CAAC,SAAS,CAAC,CAACC,GAAG,CAACC,KAAK,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;IACpE,KAAK,MAAMC,CAAC,IAAIP,QAAQ,EAAE;MACxB,IAAIO,CAAC,CAACC,UAAU,CAACN,MAAM,CAAC,EAAE,OAAO,YAAY;IAC/C;IAEA,OAAO,IAAI;EACb,CAAC;EAEDO,MAAM,EAAE,SAAAA,CAAUd,OAAO,EAAEC,OAAO,EAAE;IAClC,MAAMC,EAAE,GAAGD,OAAO,CAACE,OAAO,CAACC,KAAK;IAChC,MAAMW,GAAG,GAAGd,OAAO,CAACc,GAAG;IACvB,MAAMC,GAAG,GAAGD,GAAG,CAACE,aAAa,CAAC,KAAK,CAAC;IACpC,MAAMC,KAAK,GAAGF,GAAG,CAACG,WAAW,CAACJ,GAAG,CAACE,aAAa,CAAC,OAAO,CAAC,CAAC;IACzDC,KAAK,CAACE,YAAY,CAAC,UAAU,EAAE,KAAK,CAAC;IACrC;IACAlB,EAAE,CAACmB,OAAO,CAACC,MAAM,CAACtB,OAAO,CAACU,GAAG,CAAC,CAC3Ba,IAAI,CAAC,UAAUC,QAAQ,EAAE;MACxB,OAAOA,QAAQ,CAACC,IAAI,CAAC,CAAC;IACxB,CAAC,CAAC,CACDF,IAAI,CAAC,UAAUG,MAAM,EAAE;MACtB,MAAMC,SAAS,GAAGC,GAAG,CAACC,eAAe,CAACH,MAAM,CAAC;MAC7CR,KAAK,CAACE,YAAY,CAAC,KAAK,EAAEO,SAAS,CAAC,EAAC;IACvC,CAAC,CAAC;IAEJT,KAAK,CAACE,YAAY,CAAC,OAAO,EAAE,MAAM,CAAC;IACnC,OAAOJ,GAAG;EACZ;AACF,CAAC;AACD","ignoreList":[]}